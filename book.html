<!doctype html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Ultra Smooth Photo Viewer</title>

<link href="https://fonts.googleapis.com/css2?family=Hind:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --w:min(95vw,650px);
  --h:min(80vh,780px);
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:Hind,sans-serif;
  background:linear-gradient(135deg,#3a2a1c,#2b1b0f);
}

/* controls */
.topbar{
  position:fixed;
  top:12px;
  left:0;
  right:0;
  display:flex;
  justify-content:center;
  gap:10px;
}

button{
  padding:8px 15px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  font-weight:bold;
}

/* viewer */
.viewer{
  width:var(--w);
  height:var(--h);
  background:black;
  position:relative;
  overflow:hidden;
  touch-action:none;
}

/* 2 image layers */
.viewer img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  transition:opacity .35s ease, transform .2s ease;
}

.imgTop{opacity:1; z-index:2;}
.imgBottom{opacity:0; z-index:1;}

/* counter */
.counter{
  position:absolute;
  top:10px;
  right:10px;
  color:white;
  background:rgba(0,0,0,.4);
  padding:5px 12px;
  border-radius:20px;
  z-index:5;
}
</style>
</head>

<body>

<div class="topbar">
<button id="prevBtn">⬅ Prev</button>
<button id="nextBtn">Next ➡</button>
<button id="fullscreenBtn">⛶ Full</button>
<button id="autoBtn">▶ Auto</button>
</div>

<div class="viewer" id="viewer">
<img id="img1" class="imgTop">
<img id="img2" class="imgBottom">
<div class="counter" id="counter"></div>
</div>

<script>
const photos=[
"a.jpg","b.jpg","c.jpg","n.jpg","m.jpg","e.jpg","f.jpg","g.jpg"
];

let index=0;

const img1=document.getElementById("img1");
const img2=document.getElementById("img2");
const counter=document.getElementById("counter");

let active=img1;
let incoming=img2;

/* preload images */
photos.forEach(src=>{
  const i=new Image();
  i.src=src;
});

/* update counter */
function updateCounter(){
  counter.textContent=(index+1)+" / "+photos.length;
}

/* ultra smooth change */
function show(newIndex){
  if(newIndex<0||newIndex>=photos.length) return;

  incoming.src=photos[newIndex];

  // wait image load
  incoming.onload=()=>{
    incoming.style.opacity=1;
    active.style.opacity=0;

    setTimeout(()=>{
      index=newIndex;

      // swap layers
      [active,incoming]=[incoming,active];

      incoming.style.opacity=0;
      updateCounter();
    },350);
  };
}

function next(){show(index+1)}
function prev(){show(index-1)}

nextBtn.onclick=next;
prevBtn.onclick=prev;

/* swipe */
let startX=0;
viewer.addEventListener("pointerdown",e=>{
  startX=e.clientX;
});

viewer.addEventListener("pointerup",e=>{
  let dx=e.clientX-startX;
  if(dx<-60) next();
  if(dx>60) prev();
});

/* fullscreen */
fullscreenBtn.onclick=()=>{
  if(!document.fullscreenElement)
    viewer.requestFullscreen();
  else
    document.exitFullscreen();
};

/* auto slideshow */
let auto=false,timer;

autoBtn.onclick=()=>{
  auto=!auto;
  autoBtn.textContent=auto?"⏸ Stop":"▶ Auto";

  if(auto) timer=setInterval(next,2500);
  else clearInterval(timer);
};

/* zoom */
let scale=1,lastTap=0;

viewer.addEventListener("pointerdown",()=>{
  let now=Date.now();
  if(now-lastTap<300){
    scale=scale===1?2:1;
    active.style.transform=`scale(${scale})`;
  }
  lastTap=now;
});

/* init */
active.src=photos[index];
updateCounter();
</script>

</body>
</html>